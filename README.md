# AI D&D Platform ğŸ²ğŸ¤–

An open-source platform for playing Dungeons and Dragons online with AI assistance. Experience D&D like never before with AI-powered Dungeon Masters, NPCs, and even AI players, complete with voice synthesis and dynamic image generation.

## ğŸŒŸ Features

### ğŸ­ AI-Powered Gameplay
- **AI Dungeon Master**: Intelligent DM that creates dynamic stories and manages gameplay
- **AI NPCs**: Fully voiced non-player characters with unique personalities
- **AI Players**: Optional AI companions for solo adventures or to fill party roles

### ğŸ® Flexible Play Modes
- **Solo Mode**: Play alone with AI companions and DM
- **Multiplayer Mode**: Play with friends, optionally with AI assistance
- **Hybrid Mode**: Mix human and AI players seamlessly

### ğŸ¨ Rich Media Integration
- **Voice Synthesis**: Powered by [Resemble.ai](https://resemble.ai) for character voices
- **Dynamic Images**: Generated by [Flux.dev](https://flux.dev) for characters, scenes, and items
- **Interactive UI**: Modern, responsive interface for all platforms

### ğŸŒ Cross-Platform
- **Mobile**: iOS and Android native apps
- **Web**: Browser-based gameplay
- **Universal**: Seamless experience across all platforms

## ğŸš€ Quick Start

1. **Install dependencies**
   ```bash
   npm install
   ```

2. **Start the development server**
   ```bash
   npx expo start
   ```

3. **Choose your platform**
   - Press `i` for iOS simulator
   - Press `a` for Android emulator
   - Press `w` for web browser
   - Scan QR code with Expo Go app

## ğŸ—ï¸ Development

### Prerequisites
- Node.js 22+ (LTS)
- Expo CLI
- For mobile development: iOS Simulator (macOS) or Android Studio

### Available Scripts
- `npm start` - Start Expo development server
- `npm run android` - Run on Android emulator
- `npm run ios` - Run on iOS simulator
- `npm run web` - Run in web browser
- `npm run lint` - Run ESLint
- `npm run test` - Run tests (when implemented)

### Project Structure
```
ai-dnd-expo/
â”œâ”€â”€ app/              # File-based routing (Expo Router)
â”œâ”€â”€ components/       # Reusable UI components
â”œâ”€â”€ hooks/           # Custom React hooks
â”œâ”€â”€ constants/       # App constants and configuration
â”œâ”€â”€ assets/          # Static assets (images, fonts)
â”œâ”€â”€ services/        # API services and integrations
â”œâ”€â”€ types/           # TypeScript type definitions
â”œâ”€â”€ utils/           # Utility functions
â””â”€â”€ docs/            # Documentation
```

## ğŸ¤– AI Integration

### Core AI Services
- **Resemble.ai**: Voice synthesis for character dialogue
- **Flux.dev**: Image generation for characters and scenes
- **OpenAI/Anthropic**: Conversation and gameplay logic
- **Custom AI**: Game rule enforcement and story generation

### AI Agent Types
- **Dungeon Master**: Manages story, NPCs, and game rules
- **Player Characters**: AI companions with unique personalities
- **NPCs**: Interactive non-player characters
- **Rule Advisor**: Helps with D&D rules and mechanics

## ğŸ¯ Roadmap

See [TODO.md](./TODO.md) for detailed development roadmap and feature planning.

## ğŸ¤ Contributing

We welcome contributions! Please see our [AI-INSTRUCTIONS.md](./AI-INSTRUCTIONS.md) for guidelines on AI-assisted development.

### Development Guidelines
- Follow TypeScript best practices
- Use Expo Router for navigation
- Implement proper error handling
- Write tests for critical functionality
- Follow the existing code style

## ğŸ“š Documentation

- [AI Instructions](./AI-INSTRUCTIONS.md) - Guidelines for AI-assisted development
- [Development TODO](./TODO.md) - Feature roadmap and tasks
- [Claude Instructions](./CLAUDE.md) - Claude Code-specific guidance

## ğŸ”§ Technology Stack

- **Frontend**: React Native + Expo
- **Language**: TypeScript
- **Navigation**: Expo Router
- **Styling**: React Native StyleSheet + Theming
- **State Management**: React Context (expanding to Redux Toolkit)
- **API Integration**: Axios + React Query
- **Voice**: Resemble.ai API
- **Images**: Flux.dev API
- **AI**: OpenAI/Anthropic APIs

## ğŸ“± Platform Support

- âœ… iOS (iPhone & iPad)
- âœ… Android
- âœ… Web (Progressive Web App)
- ğŸ”„ Desktop (future: Electron)

## ğŸ›¡ï¸ Privacy & Security

- User data encryption
- Secure API key management
- Optional local-only mode
- GDPR compliance ready

## ğŸ“„ License

MIT License - see [LICENSE](./LICENSE) for details.

## ğŸ² Let's Play!

Ready to embark on your AI-assisted D&D adventure? Install the app and let the AI guide you through epic quests, memorable characters, and unforgettable stories.

## ğŸš€ Automated TestFlight Releases

Pushes to the `main` branch automatically trigger the **Release iOS to TestFlight** GitHub Action. The workflow installs dependencies, builds the iOS binary with the Expo Application Services (EAS) production profile, and submits the build to TestFlight.

### 1. Create the required credentials

1. **Expo access token** â€“ Generate a long-lived token from your Expo account settings (`https://expo.dev/accounts/<account>/settings/access-tokens>`).
2. **App Store Connect API key (recommended)** â€“ Create an API key with *App Manager* access in App Store Connect, then download the `.p8` file. Combine the key details into JSON and base64-encode it so it can be stored as a secret:
   ```bash
   cat <<'JSON' > asc-api-key.json
   {
     "keyId": "<KEY_ID>",
     "issuerId": "<ISSUER_ID>",
     "key": "$(tr -d '\n' < AuthKey_<KEY_ID>.p8)"
   }
   JSON

   base64 asc-api-key.json | pbcopy  # macOS example
   ```
   > You can alternatively provide an **App Store Connect app-specific password** if you cannot use an API key.
3. **Team and App identifiers** â€“ Note your Apple Developer Team ID (available in the Apple Developer portal) and the App Store Connect App ID (the numeric ID shown on the appâ€™s App Information page).

### 2. Add GitHub Action secrets

Store the following secrets in **Settings â†’ Secrets and variables â†’ Actions**:

| Secret name | Required | Description |
| --- | --- | --- |
| `EXPO_TOKEN` | âœ… | Expo access token used by the workflow to authenticate with EAS. |
| `EXPO_APP_STORE_CONNECT_API_KEY` | âœ… (recommended) | Base64-encoded App Store Connect API key JSON as shown above. |
| `EXPO_APPLE_APP_SPECIFIC_PASSWORD` | âš ï¸ (optional) | App-specific password for Apple ID. Only needed if you are not providing an API key. |
| `APPLE_TEAM_ID` | âœ… | Apple Developer Team ID used for signing. |
| `APPLE_ASC_APP_ID` | âœ… | Numeric App Store Connect App ID injected into `eas.json` before submission. |

The workflow fails fast if any required secret is missing. Provide either the API key **or** an app-specific password to allow Expo to authenticate with App Store Connect.

### 3. (Optional) Mirror credentials in Expo

If you also want to run the same release build from your local machine or directly from Expo, mirror the secrets into the Expo project:

```bash
eas secret:create --name EXPO_APP_STORE_CONNECT_API_KEY --scope project --type string --value "$(base64 asc-api-key.json)"
eas secret:create --name APPLE_TEAM_ID --scope project --type string --value "<TEAM_ID>"
eas secret:create --name APPLE_ASC_APP_ID --scope project --type string --value "<APP_ID>"
```

### 4. Triggering a release

Once the secrets are configured, every push to `main` will build and submit the iOS production profile to TestFlight automatically. Track build and submission progress in the GitHub Actions run log or in the [Expo EAS dashboard](https://expo.dev/accounts) for deeper visibility.
